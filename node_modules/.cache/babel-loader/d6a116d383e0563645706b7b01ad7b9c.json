{"ast":null,"code":"import _classCallCheck from \"/Users/mikemullin/Desktop/React/MeterBeaters/meterbeaters/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/mikemullin/Desktop/React/MeterBeaters/meterbeaters/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/mikemullin/Desktop/React/MeterBeaters/meterbeaters/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/mikemullin/Desktop/React/MeterBeaters/meterbeaters/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/mikemullin/Desktop/React/MeterBeaters/meterbeaters/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/mikemullin/Desktop/React/MeterBeaters/meterbeaters/src/App.js\";\nimport React, { Component } from \"react\";\nimport \"./App.css\";\nimport DatePickerComponent from \"./Components/DatePickerComponent\";\nimport GeoSuggestTextField from \"./Components/GeoSuggestTextField/GeoSuggestTextField.js\";\nimport MBNavBar from \"./Components/NavBar/MBNavBar\";\nimport axios from \"axios\";\nvar DEFAULT_LAT = 41.8789;\nvar DEFAULT_LNG = -87.6359;\n\nvar App =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(App, _Component);\n\n  function App() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, App);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(App)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      lat: DEFAULT_LAT,\n      lng: DEFAULT_LNG,\n      startTime: \"11:00\",\n      endTime: \"12:00\",\n      parkingDataRaw: [],\n      leadsDataRaw: [],\n      selectedLead: null,\n      generateLeadsCalled: false,\n      clearCalled: false\n    };\n\n    _this.onTimeChanged = function (isEnd, time) {\n      console.log(\"linked time component\", isEnd, time);\n      if (isEnd) _this.setState({\n        endTime: time\n      });else _this.setState({\n        startTime: time\n      });\n    };\n\n    _this.onSuggestCallback = function (suggest) {\n      if (suggest) {\n        var _suggest$location = suggest.location,\n            lat = _suggest$location.lat,\n            lng = _suggest$location.lng;\n        console.log(lat, lng);\n\n        _this.setState({\n          lat: lat,\n          lng: lng\n        });\n      } else {\n        _this.setState({\n          lat: DEFAULT_LAT,\n          lng: DEFAULT_LNG\n        });\n      }\n\n      _this.findParking();\n    };\n\n    _this.onLeadClicked = function (info) {\n      _this.setState({\n        selectedLead: info\n      });\n\n      console.log(\"LeadInfo\", info);\n    };\n\n    _this.generateLeads = function () {\n      var postParams = {\n        Longitude: _this.state.lng,\n        Latitude: _this.state.lat,\n        Distance: 0.00434783\n      };\n      console.log(\"Lead Params: \", postParams);\n      console.log(postParams);\n      axios.post(\"https://www.codemojo.net/MB_Deprecated_test/mycase_leads.php\", postParams).then(function (response) {\n        console.log(\"Leads Data received\");\n        console.log(response.data.length);\n\n        if (response.data.length) {\n          console.log(response.data);\n\n          _this.setState({\n            leadsDataRaw: response.data,\n            generateLeads: true\n          });\n        } else _this.setState({\n          leadsDataRaw: [],\n          generateLeads: true\n        });\n      }).catch(function (error) {\n        console.log(\"Error:get generate leads: \", error);\n      });\n\n      _this.findParking();\n    };\n\n    _this.findParking = function () {\n      if (_this.getErrors()) {\n        console.log(\"Errors in inputs not continuing!\");\n        return;\n      }\n\n      console.log(_this.state.lat);\n\n      var postParams = _this.GetParkingURL();\n\n      console.log(postParams);\n      axios //.post(\"http://66.175.210.85/MB_Deprecated_test/newTest.php\", postParams)\n      .post(\"https://www.codemojo.net/MB_Deprecated_test/newTest.php\", postParams).then(function (response) {\n        console.log(\"Data received\");\n        console.log(response.data.length);\n\n        if (response.data.length) {\n          _this.setState({\n            parkingDataRaw: response.data\n          });\n        } else {\n          _this.setState({\n            parkingDataRaw: []\n          });\n        }\n      }).catch(function (error) {\n        console.log(\"Error:get parking: \", error);\n      });\n    };\n\n    _this.clearMap = function () {\n      _this.setState({\n        parkingDataRaw: [],\n        leadsDataRaw: [],\n        selectedLead: null,\n        clearCalled: true\n      });\n    };\n\n    _this.GetParkingURL = function () {\n      var postParams = {\n        StartTime: _this.getHHMM_asString(_this.state.startTime),\n        EndTime: _this.getHHMM_asString(_this.state.endTime),\n        Longitude: _this.state.lng,\n        Latitude: _this.state.lat,\n        Distance: 0.00434783,\n        startDay: 7,\n        endDay: 7,\n        numDays: 0,\n        email: \"reacttest@react.com\",\n        YMDstring: \"2018-12-22\",\n        parkType: 0,\n        Type: 1\n      };\n      return postParams;\n    };\n\n    return _this;\n  }\n\n  _createClass(App, [{\n    key: \"getErrors\",\n    value: function getErrors() {\n      if (this.state.startTime > this.state.endTime) return \"Start Time Is After End Time!\";else if (!this.state.lat || !this.state.lng) return \"Parking Location Is Not Set!\";else return false;\n    }\n  }, {\n    key: \"getHHMM_asString\",\n    value: function getHHMM_asString(timeString) {\n      return timeString.split(\":\").join(\"\");\n    }\n  }, {\n    key: \"componentDidMount\",\n    //\n    value: function componentDidMount() {\n      console.log(\"mounted called\");\n      this.generateLeads();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var parkingData = [];\n\n      if (this.state.parkingDataRaw && this.state.parkingDataRaw.length) {\n        parkingData = this.state.parkingDataRaw.map(function (dataForSpot, index) {\n          //const id = dataForSpot[\"ID\"];\n          var latStart = parseFloat(dataForSpot[\"BeginLat\"]);\n          var latEnd = parseFloat(dataForSpot[\"EndLat\"]);\n          var longStart = parseFloat(dataForSpot[\"BeginLong\"]);\n          var longEnd = parseFloat(dataForSpot[\"EndLong\"]);\n          var insert = [{\n            lat: latStart,\n            lng: longStart\n          }, {\n            lat: latEnd,\n            lng: longEnd\n          }];\n          return insert;\n        });\n      }\n\n      var leadsData = [];\n\n      if (this.state.leadsDataRaw && this.state.leadsDataRaw.length) {\n        leadsData = this.state.leadsDataRaw.map(function (dataForSpot, index) {\n          //const id = dataForSpot[\"ID\"];\n          var latInfo = parseFloat(dataForSpot[\"lat\"]);\n          var lngInfo = parseFloat(dataForSpot[\"lng\"]);\n          var id = parseInt(dataForSpot[\"task_id\"]);\n          var name = dataForSpot[\"name\"];\n          var insert = {\n            lat: latInfo,\n            lng: lngInfo,\n            lead_id: id,\n            name: name\n          };\n          return insert;\n        });\n      }\n\n      var warning = this.getErrors();\n      var leadsInfo = null;\n      /*this.state.generateLeadsCalled ? (\n      leadsData.length > 0 ? null : (\n      <h1>No Leads Here Try Willis Tower or Santa Barbara!</h1>\n      )\n      ) : null;*/\n\n      var parkingInfoFooter = null;\n\n      if (this.state.clearCalled) {\n        parkingInfoFooter = React.createElement(\"h1\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 192\n          },\n          __self: this\n        }, \"There Are Whispers of Leads in Santa Barbara and Willis Tower\");\n      } else {\n        parkingInfoFooter = parkingData.length > 0 ? React.createElement(\"h1\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 197\n          },\n          __self: this\n        }, parkingData.length, \" Parking Spots Available!\") : React.createElement(\"h1\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 199\n          },\n          __self: this\n        }, \"No Parking Data Available Here! Whispers of Leads in Santa Barbara\");\n      }\n\n      return React.createElement(\"div\", {\n        className: \"App\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 206\n        },\n        __self: this\n      }, React.createElement(MBNavBar, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 207\n        },\n        __self: this\n      }), React.createElement(DatePickerComponent, {\n        timeChanged: function timeChanged(isEnd, time) {\n          return _this2.onTimeChanged(isEnd, time);\n        },\n        timeStart: this.state.startTime,\n        timeEnd: this.state.endTime,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 208\n        },\n        __self: this\n      }), React.createElement(\"button\", {\n        className: \"btn btn-primary btn-md m-2\",\n        onClick: this.findParking,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 213\n        },\n        __self: this\n      }, \"Find Parking!\"), React.createElement(\"button\", {\n        className: \"btn btn-success btn-md m-2 btn-tooltip\",\n        onClick: this.generateLeads,\n        \"data-placement\": \"bottom\",\n        title: \"Try Willis Tower Or Santa Barba For Leads!\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 220\n        },\n        __self: this\n      }, \"Generate Law Firm Leads And Park!\"), React.createElement(\"button\", {\n        className: \"btn btn-danger btn-md m-2\",\n        onClick: this.clearMap,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 229\n        },\n        __self: this\n      }, \"Clear Map!\"), React.createElement(\"h3\", {\n        className: \"WarnableText\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 233\n        },\n        __self: this\n      }, warning), React.createElement(GeoSuggestTextField, {\n        suggest: function suggest(_suggest) {\n          return _this2.onSuggestCallback(_suggest);\n        },\n        lat: this.state.lat,\n        lng: this.state.lng,\n        parkingInfo: parkingData,\n        leadsInfo: leadsData,\n        selectedLead: this.state.selectedLead,\n        onLeadClicked: function onLeadClicked(info) {\n          return _this2.onLeadClicked(info);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 235\n        },\n        __self: this\n      }), parkingInfoFooter);\n    }\n  }]);\n\n  return App;\n}(Component);\n\nexport default App;","map":{"version":3,"sources":["/Users/mikemullin/Desktop/React/MeterBeaters/meterbeaters/src/App.js"],"names":["React","Component","DatePickerComponent","GeoSuggestTextField","MBNavBar","axios","DEFAULT_LAT","DEFAULT_LNG","App","state","lat","lng","startTime","endTime","parkingDataRaw","leadsDataRaw","selectedLead","generateLeadsCalled","clearCalled","onTimeChanged","isEnd","time","console","log","setState","onSuggestCallback","suggest","location","findParking","onLeadClicked","info","generateLeads","postParams","Longitude","Latitude","Distance","post","then","response","data","length","catch","error","getErrors","GetParkingURL","clearMap","StartTime","getHHMM_asString","EndTime","startDay","endDay","numDays","email","YMDstring","parkType","Type","timeString","split","join","parkingData","map","dataForSpot","index","latStart","parseFloat","latEnd","longStart","longEnd","insert","leadsData","latInfo","lngInfo","id","parseInt","name","lead_id","warning","leadsInfo","parkingInfoFooter"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport \"./App.css\";\nimport DatePickerComponent from \"./Components/DatePickerComponent\";\nimport GeoSuggestTextField from \"./Components/GeoSuggestTextField/GeoSuggestTextField.js\";\nimport MBNavBar from \"./Components/NavBar/MBNavBar\";\nimport axios from \"axios\";\n\nconst DEFAULT_LAT = 41.8789;\nconst DEFAULT_LNG = -87.6359;\n\nclass App extends Component {\n  state = {\n    lat: DEFAULT_LAT,\n    lng: DEFAULT_LNG,\n    startTime: \"11:00\",\n    endTime: \"12:00\",\n    parkingDataRaw: [],\n    leadsDataRaw: [],\n    selectedLead: null,\n    generateLeadsCalled: false,\n    clearCalled: false\n  };\n\n  getErrors() {\n    if (this.state.startTime > this.state.endTime)\n      return \"Start Time Is After End Time!\";\n    else if (!this.state.lat || !this.state.lng)\n      return \"Parking Location Is Not Set!\";\n    else return false;\n  }\n\n  onTimeChanged = (isEnd, time) => {\n    console.log(\"linked time component\", isEnd, time);\n    if (isEnd) this.setState({ endTime: time });\n    else this.setState({ startTime: time });\n  };\n\n  onSuggestCallback = suggest => {\n    if (suggest) {\n      const { lat, lng } = suggest.location;\n      console.log(lat, lng);\n      this.setState({ lat: lat, lng: lng });\n    } else {\n      this.setState({ lat: DEFAULT_LAT, lng: DEFAULT_LNG });\n    }\n\n    this.findParking();\n  };\n\n  onLeadClicked = info => {\n    this.setState({ selectedLead: info });\n    console.log(\"LeadInfo\", info);\n  };\n\n  generateLeads = () => {\n    const postParams = {\n      Longitude: this.state.lng,\n      Latitude: this.state.lat,\n      Distance: 0.00434783\n    };\n\n    console.log(\"Lead Params: \", postParams);\n\n    console.log(postParams);\n    axios\n      .post(\n        \"https://www.codemojo.net/MB_Deprecated_test/mycase_leads.php\",\n        postParams\n      )\n      .then(response => {\n        console.log(\"Leads Data received\");\n        console.log(response.data.length);\n        if (response.data.length) {\n          console.log(response.data);\n          this.setState({ leadsDataRaw: response.data, generateLeads: true });\n        } else this.setState({ leadsDataRaw: [], generateLeads: true });\n      })\n      .catch(error => {\n        console.log(\"Error:get generate leads: \", error);\n      });\n\n    this.findParking();\n  };\n\n  findParking = () => {\n    if (this.getErrors()) {\n      console.log(\"Errors in inputs not continuing!\");\n      return;\n    }\n\n    console.log(this.state.lat);\n    const postParams = this.GetParkingURL();\n    console.log(postParams);\n    axios\n      //.post(\"http://66.175.210.85/MB_Deprecated_test/newTest.php\", postParams)\n      .post(\n        \"https://www.codemojo.net/MB_Deprecated_test/newTest.php\",\n        postParams\n      )\n      .then(response => {\n        console.log(\"Data received\");\n        console.log(response.data.length);\n        if (response.data.length) {\n          this.setState({ parkingDataRaw: response.data });\n        } else {\n          this.setState({ parkingDataRaw: [] });\n        }\n      })\n      .catch(error => {\n        console.log(\"Error:get parking: \", error);\n      });\n  };\n\n  getHHMM_asString(timeString) {\n    return timeString.split(\":\").join(\"\");\n  }\n\n  clearMap = () => {\n    this.setState({\n      parkingDataRaw: [],\n      leadsDataRaw: [],\n      selectedLead: null,\n      clearCalled: true\n    });\n  };\n\n  GetParkingURL = () => {\n    const postParams = {\n      StartTime: this.getHHMM_asString(this.state.startTime),\n      EndTime: this.getHHMM_asString(this.state.endTime),\n      Longitude: this.state.lng,\n      Latitude: this.state.lat,\n      Distance: 0.00434783,\n      startDay: 7,\n      endDay: 7,\n      numDays: 0,\n      email: \"reacttest@react.com\",\n      YMDstring: \"2018-12-22\",\n      parkType: 0,\n      Type: 1\n    };\n\n    return postParams;\n  };\n  //\n  componentDidMount() {\n    console.log(\"mounted called\");\n    this.generateLeads();\n  }\n\n  render() {\n    let parkingData = [];\n    if (this.state.parkingDataRaw && this.state.parkingDataRaw.length) {\n      parkingData = this.state.parkingDataRaw.map((dataForSpot, index) => {\n        //const id = dataForSpot[\"ID\"];\n        const latStart = parseFloat(dataForSpot[\"BeginLat\"]);\n        const latEnd = parseFloat(dataForSpot[\"EndLat\"]);\n        const longStart = parseFloat(dataForSpot[\"BeginLong\"]);\n        const longEnd = parseFloat(dataForSpot[\"EndLong\"]);\n        const insert = [\n          { lat: latStart, lng: longStart },\n          { lat: latEnd, lng: longEnd }\n        ];\n        return insert;\n      });\n    }\n\n    let leadsData = [];\n    if (this.state.leadsDataRaw && this.state.leadsDataRaw.length) {\n      leadsData = this.state.leadsDataRaw.map((dataForSpot, index) => {\n        //const id = dataForSpot[\"ID\"];\n        const latInfo = parseFloat(dataForSpot[\"lat\"]);\n        const lngInfo = parseFloat(dataForSpot[\"lng\"]);\n        const id = parseInt(dataForSpot[\"task_id\"]);\n        const name = dataForSpot[\"name\"];\n        const insert = { lat: latInfo, lng: lngInfo, lead_id: id, name: name };\n        return insert;\n      });\n    }\n\n    let warning = this.getErrors();\n\n    let leadsInfo = null; /*this.state.generateLeadsCalled ? (\n      leadsData.length > 0 ? null : (\n        <h1>No Leads Here Try Willis Tower or Santa Barbara!</h1>\n      )\n    ) : null;*/\n\n    let parkingInfoFooter = null;\n    if (this.state.clearCalled) {\n      parkingInfoFooter = (\n        <h1>There Are Whispers of Leads in Santa Barbara and Willis Tower</h1>\n      );\n    } else {\n      parkingInfoFooter =\n        parkingData.length > 0 ? (\n          <h1>{parkingData.length} Parking Spots Available!</h1>\n        ) : (\n          <h1>\n            No Parking Data Available Here! Whispers of Leads in Santa Barbara\n          </h1>\n        );\n    }\n\n    return (\n      <div className=\"App\">\n        <MBNavBar />\n        <DatePickerComponent\n          timeChanged={(isEnd, time) => this.onTimeChanged(isEnd, time)}\n          timeStart={this.state.startTime}\n          timeEnd={this.state.endTime}\n        />\n        <button\n          className=\"btn btn-primary btn-md m-2\"\n          onClick={this.findParking}\n        >\n          Find Parking!\n        </button>\n\n        <button\n          className=\"btn btn-success btn-md m-2 btn-tooltip\"\n          onClick={this.generateLeads}\n          data-placement=\"bottom\"\n          title=\"Try Willis Tower Or Santa Barba For Leads!\"\n        >\n          Generate Law Firm Leads And Park!\n        </button>\n\n        <button className=\"btn btn-danger btn-md m-2\" onClick={this.clearMap}>\n          Clear Map!\n        </button>\n\n        <h3 className=\"WarnableText\">{warning}</h3>\n\n        <GeoSuggestTextField\n          suggest={suggest => this.onSuggestCallback(suggest)}\n          lat={this.state.lat}\n          lng={this.state.lng}\n          parkingInfo={parkingData}\n          leadsInfo={leadsData}\n          selectedLead={this.state.selectedLead}\n          onLeadClicked={info => this.onLeadClicked(info)}\n        />\n\n        {parkingInfoFooter}\n      </div>\n    );\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}